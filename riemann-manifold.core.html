<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>riemann-manifold.core documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Riemann-manifold 0.2.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>riemann-manifold</span></div></div></li><li class="depth-2 current"><a href="riemann-manifold.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="riemann-manifold.core.html#var-consume-metrics"><div class="inner"><span>consume-metrics</span></div></a></li><li class="depth-1"><a href="riemann-manifold.core.html#var-instrument"><div class="inner"><span>instrument</span></div></a></li><li class="depth-1"><a href="riemann-manifold.core.html#var-RiemannSender"><div class="inner"><span>RiemannSender</span></div></a></li><li class="depth-2"><a href="riemann-manifold.core.html#var-send.21"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>send!</span></div></a></li><li class="depth-1"><a href="riemann-manifold.core.html#var-stream-events"><div class="inner"><span>stream-events</span></div></a></li><li class="depth-1"><a href="riemann-manifold.core.html#var-stream-metrics"><div class="inner"><span>stream-metrics</span></div></a></li><li class="depth-1"><a href="riemann-manifold.core.html#var-stream-state"><div class="inner"><span>stream-state</span></div></a></li><li class="depth-1"><a href="riemann-manifold.core.html#var-tap"><div class="inner"><span>tap</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">riemann-manifold.core</h2><div class="doc"><pre class="plaintext"></pre></div><div class="public anchor" id="var-consume-metrics"><h3>consume-metrics</h3><div class="usage"><code>(consume-metrics c src)</code></div><div class="doc"><pre class="plaintext">Take metrics (or a collection of metrics) from a stream, send to
Riemann.</pre></div><div class="src-link"><a href="http://github.com/FundingCircle/riemann-manifold/blob/master/src/riemann_manifold/core.clj#L62">view source</a></div></div><div class="public anchor" id="var-instrument"><h3>instrument</h3><div class="usage"><code>(instrument src c service period)</code><code>(instrument src c service period event-data)</code></div><div class="doc"><pre class="plaintext">Send metrics for a manifold stream to Riemann. This will
periodically send information provide from
`manifold.stream/description` along with a derived state as Riemann
events.

Accepts an optional map to include in each event.</pre></div><div class="src-link"><a href="http://github.com/FundingCircle/riemann-manifold/blob/master/src/riemann_manifold/core.clj#L69">view source</a></div></div><div class="public anchor" id="var-RiemannSender"><h3>RiemannSender</h3><h4 class="type">protocol</h4><div class="usage"></div><div class="doc"><pre class="plaintext">A lot of hand waving just so we can have a single function to
consume metrics from a manifold stream.</pre></div><div class="members"><h4>members</h4><div class="inner"><div class="public anchor" id="var-send.21"><h3>send!</h3><div class="usage"><code>(send! m c)</code><code>(send! c m t)</code></div><div class="doc"><pre class="plaintext"></pre></div></div></div></div><div class="src-link"><a href="http://github.com/FundingCircle/riemann-manifold/blob/master/src/riemann_manifold/core.clj#L45">view source</a></div></div><div class="public anchor" id="var-stream-events"><h3>stream-events</h3><div class="usage"><code>(stream-events service src)</code><code>(stream-events service src base-event)</code></div><div class="doc"><pre class="plaintext">Returns a collection of Riemann events for a stream. Each numeric
metric will be a separate event, with state for each event set to
that of the source stream.</pre></div><div class="src-link"><a href="http://github.com/FundingCircle/riemann-manifold/blob/master/src/riemann_manifold/core.clj#L27">view source</a></div></div><div class="public anchor" id="var-stream-metrics"><h3>stream-metrics</h3><div class="usage"><code>(stream-metrics src)</code></div><div class="doc"><pre class="plaintext">Filters a stream description only include those with numeric
values.</pre></div><div class="src-link"><a href="http://github.com/FundingCircle/riemann-manifold/blob/master/src/riemann_manifold/core.clj#L16">view source</a></div></div><div class="public anchor" id="var-stream-state"><h3>stream-state</h3><div class="usage"><code>(stream-state src)</code></div><div class="doc"><pre class="plaintext">Gives a string describing the state of a stream.
</pre></div><div class="src-link"><a href="http://github.com/FundingCircle/riemann-manifold/blob/master/src/riemann_manifold/core.clj#L7">view source</a></div></div><div class="public anchor" id="var-tap"><h3>tap</h3><div class="usage"><code>(tap src c service f ttl &amp; tags)</code></div><div class="doc"><pre class="plaintext">Given a source stream, returns a new &quot;tapped&quot; stream that use the
contents of a stream to provide metrics to Riemann.

Function `f` should return a map (ideally with a metric key) that
will be merged into the event sent to Riemann.

Tappings a stream is intrusive. This will introduce backpressure
where events are sent to Riemann, and set the given stream to be
source-only.</pre></div><div class="src-link"><a href="http://github.com/FundingCircle/riemann-manifold/blob/master/src/riemann_manifold/core.clj#L91">view source</a></div></div></div></body></html>